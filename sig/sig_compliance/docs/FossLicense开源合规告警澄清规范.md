# FossLicense开源合规告警澄清规范

## 目的

本文档定义的规范确保OpenHarmony社区版本发布前或孵化项目毕业前，各部件在处理FossLicense开源合规检查内的开源合规告警（许可证篡改告警、版权篡改告警、许可证兼容性告警）时，能够做到澄清内容清晰，原因表述准确，以便在后续核查、追溯时，可理解、可解释。

## 范围

本指导适用于OpenHarmony社区在研主线最新版本申请发布评审（含Release版本、LTS版本、beta版本），也包含已发布版本再维护状态下申请补丁版本发布评审，同时也适用于孵化项目在毕业时的开源合规告警澄清

## 本文的改进和修订说明

1. 本文档由合规SIG主导起草和维护。最新版本可以在 [这里](OpenHarmony社区版本发布开源合规专项评审规范.md)找到。
2. 任何对于本文中涉及的规则的增加，修改，删除都必须可追溯 。
3. 最终规则经过社区充分的讨论后，由PMC评审定稿。

## 篡改分析专项告警澄清
### 许可证篡改告警澄清规范
按照不同场景区分澄清内容，点击告警条目中左侧下拉箭头，查看具体详情，点击Diff对比，查看具体告警内容

**场景1**： 被检查文件与同源文件中实际代码不相同（要求大面积不相同，如果仅个别代码行不同，也认为整体相同），不是引用的该同源文件，故被检测文件与同源文件许可证不同，属于工具误报。

**澄清理由**： 【非同源文件】经人工确认，本文件与同源文件（具体项目名-文件）不相同，非同源文件，不存在引用关系，故不存在许可证篡改。

**场景2**： 被检查文件与同源文件实际代码部分基本相同，但被检查文件本身是第三方开源软件中原生文件，开发者未做任何修改，但两文件的许可证不同，可能是由于检测到的同源文件本身有许可证改动，经和合规SIG确认后，可屏蔽。

**澄清理由**： 【第三方原生，未修改】经人工确认，本文件与同源文件（具体项目名-文件）基本相同，但本文件从第三方XX软件原生引入，未做修改，与上游保持一致。

**场景3**： 被检查文件与同源文件实际代码部分基本相同，但被检查文件本身是第三方开源软件中原生文件，开发者未做任何修改，但两文件的许可证不同，可能是由于同一软件不同版本间，开源项目自身许可证发生变化，经和合规SIG确认后，可屏蔽。

**澄清理由**： 【第三方原生，未修改】经人工确认，本文件与同源文件（具体项目名-文件）基本相同，但版本不同，且上游社区在新版本发生许可证变化，未做修改，与上游保持一致。


## 版权篡改告警澄清
按照不同场景区分澄清内容，点击告警条目中左侧下拉箭头，查看具体详情，点击Diff对比，查看具体告警内容

**场景1**： 被检查文件与同源文件实际不相同（要求大面积不相同，如果仅个别代码行不同，也认为整体相同），不是引用的该同源文件，故被检测文件与同源文件版权不同，属于工具误报。

**澄清理由**： 【非同源文件】经人工确认，本文件与同源文件（具体项目名-文件）不相同，非同源文件，不存在引用关系，故不存在版权篡改。

**场景2**： 被检查文件与同源文件实际基本相同，但被检查文件本身是第三方开源软件中原生文件，开发者未做任何修改，但两文件的版权不同，可能是由于检测到的同源文件本身有版权改动，经和合规SIG确认后，可屏蔽。

**澄清理由**：【第三方原生，未修改】经人工确认，本文件与同源文件（具体项目名-文件）基本相同，但本文件从第三方XX软件原生引入，未做修改，与上游保持一致。

**场景3**： 被检查文件与同源文件实际基本相同，但被检查文件本身是第三方开源软件中原生文件，开发者未做任何修改，但两文件的版权略有不同，一般表现为归属主体相同，但年份不同的情况，此类问题，可屏蔽

**澄清理由**：【版权实际相同】经人工确认，本文件与同源文件在版权归属方上表述一致，仅年份不同。

##兼容分析专项告警澄清
### 兼容性告警澄清规范
按照不同场景区分澄清内容，点击告警条目中左侧下拉箭头，查看具体详情，点击不兼容的文件，查看该不兼容文件的许可证

**场景1**： 其中至少一方包含许可证例外条款（exception），确认许可证中具体的例外条款的要求，是否是当前文件的对应场景，若满足例外条款要求，则存在兼容可能，进一步咨询法务确认是否可以兼容。

**澄清理由**：【满足例外条款】经人工确认，XXX文件中许可证存在例外条款（XXX exception， 如syscall exception），当前文件使用场景满足例外条款要求，并经与法务确认，在此条件下可以兼容。

**场景2**：其中至少一方包含双许可证（两种许可证二选一），确认双许可中是否有一方可以与冲突许可证进行兼容，则进一步咨询法务确认是否可以兼容 

**澄清理由**：【双许可证，选XXX】经人工确认，XXX文件中存在两种许可，并支持二选一（XXX和XXXXX，如GPL-2.0 or BSD），经与法务确认，XXX满足兼容要求。

**场景2**：其中至少一方许可证识别有误，导致的许可证错误识别从而产生了兼容性告警，即告警中识别的许可证信息和实际许可证不一致，确认许可证实际内容，并对双方许可证进行判断，若不确定兼容性，可与法务或合规SIG咨询，确认后可进行屏蔽 

**澄清理由**：【工具误报许可证识别错误】经人工确认，XXX1文件中实际许可证为AAA，工具误报成BBB，实际与XXX2文件中的CCC许可证满足兼容要求。
